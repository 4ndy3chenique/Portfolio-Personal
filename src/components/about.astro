---
import "../styles/global.css";
import Document from "../assets/Document.svg";
import CodeIcon from "../assets/CodeIcon.svg";
import foto from "../assets/foto.svg";
import CodeCard from "../assets/CodeCard.svg";
import Certificate from "../assets/CertificadosCard.svg";
import SkillCard from "../assets/SkillsCard.svg";
import Arrow from "../assets/ArrowIcon.svg";
---

<style>
  @import url("https://fonts.googleapis.com/css2?family=Alice&family=Inder&family=Lalezar&display=swap");
  @import url("https://fonts.googleapis.com/css2?family=Alice&family=Inder&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Lalezar&display=swap");
</style>

<section
  id="about"
  class="relative mx-auto text-white font-['Lalezar']
         flex items-center justify-center
         w-[402px] h-[1410px] md:w-[2560px] md:h-[1738px] md:pt-500"
>
<!-- Contenedor centrado -->
<div
  class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
         w-[340px] h-[1356px] md:w-[2171px] md:h-[1591px]"
>
  <!-- 1) HEADER -->
  <div class="w-[340px] h-[97px] md:w-[2171px] md:h-[277px] flex justify-center">
    <div class="w-[340px] h-[97px] md:w-[1382px] md:h-[277px]">
      <div class="w-[340px] h-[74px] md:w-[1382px] md:h-[179px] grid place-items-center">
        <h2
          class="reveal text-[40px] md:text-[150px] leading-[1] tracking-[0.02em]
                 drop-shadow-[0_1px_16px_rgba(255,255,255,0.35)]"
          style="--d:0ms"
        >
          Sobre mí
        </h2>
      </div>
      <div class="w-[340px] h-[23px] md:w-[1382px] md:h-[98px] text-center">
        <p class="reveal text-[13px] md:text-[30px] text-white font-['Inder']" style="--d:120ms">
          Aprendiendo, creando y compartiendo tecnología.
        </p>
      </div>
    </div>
  </div>

  <!-- 2) CUERPO -->
  <div
    class="w-[340px] h-[1013px] md:w-[2171px] md:h-[823px]
           flex flex-col md:flex-row md:gap-8"
  >
    <!-- FOTO (arriba en móvil, derecha en desktop) -->
    <div
      class="order-1 md:order-2
             w-[339px] h-[360px] md:w-[775px] md:h-[823px]
             grid place-items-center reveal mx-auto"
    >
      <div class="perspective-[1200px] relative">
        <div
          id="photo3d"
          class="photo-3d w-[300px] h-[309px] md:w-[693px] md:h-[713px]
                 rounded-full overflow-hidden ring-1 ring-white/15 bg-white/5 backdrop-blur-md
                 border-4 md:border-6 shadow-[0_0_30px_#839CA8] md:shadow-[0_0_50px_#839CA8] relative"
        >
          <img src={foto.src} alt="Foto" class="w-full h-full object-cover" />
        </div>
      </div>
    </div>

    <!-- TEXTO (debajo de la foto en móvil; incluye saludo, descripción y BOTONES) -->
    <div
      class="order-2 md:order-1
             w-[340px] h-auto md:w-[1396px] md:h-[823px] flex flex-col"
    >
      <!-- 2.1 saludo/nombre -->
      <div
        class="w-[339px] h-[122px] md:w-[1396px] md:h-[307px] mx-auto
               flex flex-col items-center md:items-start
               text-center md:text-left"
      >
        <p
          class="reveal text-[40px] md:text-[96px] leading-[1] text-white
                 drop-shadow-[0_0_5px_#BEFEF6] md:pt-10"
          style="--d:240ms"
        >
          Hey, Soy
        </p>
        <h3
          class="reveal text-[40px] md:text-[130px] leading-[1]
                 tracking-[2px] md:tracking-normal
                 text-black/100 drop-shadow-[0_0_5px_#BEFEF6]
                 [-webkit-text-stroke:0.5px_#fff]"
          style="--d:360ms"
        >
          Jhon Ortega Echenique
        </h3>
      </div>

      <!-- 2.2 descripción -->
      <div
        class="w-[340px] h-[330px] md:w-[1396px] md:h-[321px] mx-auto
               overflow-hidden md:overflow-visible"
      >
        <p
          class="reveal text-[20px] md:text-[40px] leading-snug text-white font-['Inder']
                 tracking-[0.02em] text-center md:text-left"
          style="--d:480ms"
        >
          Soy un estudiante de Ingeniería de Sistemas Computacionales en la
          Universidad Privada del Norte, con 21 años y una gran pasión por la
          tecnología, el desarrollo web y la programación. Me encanta dar
          forma a las ideas, desde el diseño de prototipos hasta su
          implementación, buscando siempre que cada proyecto sea funcional,
          atractivo y con un toque creativo.
        </p>
      </div>

      <!-- 2.3 BOTONES (debajo de la descripción) -->
      <div
        class="w-[340px] h-[214px] md:w-[1396px] md:h-[195px]
               flex flex-col md:flex-row
               items-center md:items-center
               justify-center md:justify-start
               gap-4 md:gap-6
               pt-0 md:pt-5
               mx-auto"
      >
        <!-- Botón 1 -->
        <a
          href="/cv.pdf"
          class="moving-light reveal
                 w-[198px] h-[59px] md:w-[394px] md:h-[107px]
                 rounded-[20px] md:rounded-[30px]
                 bg-gradient-to-r from-[#318A99] to-[#112E33]
                 drop-shadow-[0_0_4px_#498B9D] group"
        >
          <div
            class="w-full h-full rounded-[20px] md:rounded-[30px] backdrop-blur-md
                   grid grid-cols-[59px_139px] md:grid-cols-[94px_1fr] bg-transparent relative z-[1]"
          >
            <div class="w-[59px] h-[59px] md:w-[94px] md:h-[107px] grid place-items-center">
              <img src={Document.src} alt="cv" class="w-[59px] h-[59px] md:w-auto md:h-auto" />
            </div>
            <div class="w-[139px] h-[59px] md:w-[300px] md:h-[107px] flex items-center">
              <span class="text-[18px] md:text-[40px] font-['Inter'] font-semibold text-white drop-shadow-[0_0_10px_#498B9D]">
                Descargar CV
              </span>
            </div>
          </div>
        </a>

        <!-- Botón 2 -->
        <a
          href="#proyectos"
          class="moving-light reveal
                 w-[198px] h-[59px] md:w-[394px] md:h-[107px]
                 rounded-[20px] md:rounded-[30px]
                 border-2 border-[#498B9D] shadow-[0_0_10px_#498B9D] group"
        >
          <div
            class="w-full h-full rounded-[20px] md:rounded-[30px]
                   grid grid-cols-[59px_139px] md:grid-cols-[92px_1fr] bg-transparent relative z-[1]"
          >
            <div class="w-[59px] h-[59px] md:w-[94px] md:h-[107px] grid place-items-center">
              <img src={CodeIcon.src} alt="proyectos" class="w-[59px] h-[59px] md:w-auto md:h-auto" />
            </div>
            <div class="w-[139px] h-[59px] md:w-[300px] md:h-[107px] flex items-center">
              <span class="text-[18px] md:text-[40px] font-['Inter'] font-semibold text-[#91CFDA] drop-shadow-[0_0_4px_#498B9D]">
                Ver Proyectos
              </span>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>




<!-- 3) TARJETAS -->
<div
  id="aboutCards"
  class="w-[340px] h-[200px]
         grid grid-flow-col auto-cols-[296px] gap-4 px-2 place-items-center
         overflow-x-auto overflow-y-hidden          
         overscroll-y-none touch-pan-x              
         snap-x snap-mandatory
         [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden
         md:w-[2171px] md:h-[491px]
         md:grid md:grid-cols-3 md:gap-0 md:px-0
         md:overflow-visible md:overscroll-auto" 
>
  <!-- CARD 1 -->
  <div
    data-card
    class="reveal
           w-[296px] h-[167px] rounded-[24px]
           grid place-items-center backdrop-blur-md border-3
           shadow-[0_8px_30px_rgba(0,0,0,0.35)]
           snap-center
           md:w-[695px] md:h-[391px] md:rounded-[40px]
           md:justify-self-start md:shadow-[0_3px_20px_#839CA8]"
  >
    <div class="w-[296px] h-[167px] rounded-[24px] bg-white/5 backdrop-blur-md ring-1 ring-white/10
                md:w-[695px] md:h-[391px] md:rounded-[40px] md:shadow-[0_8px_30px_rgba(0,0,0,0.35)]">
      <!-- top -->
      <div class="w-full h-[96px] flex items-center justify-center
                  md:w-[695px] md:h-[226px]">
        <div class="w-[240px] h-[56px] flex items-center justify-between
                    md:w-[616px] md:h-[130px]">
          <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[129px]">
            <img src={CodeCard.src} alt="" class="max-w-full max-h-full" />
          </div>
          <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[129px]">
            <span class="text-[36px] md:text-[96px] font-semibold font-['Inter'] text-[#CDCDCD]">4</span>
          </div>
        </div>
      </div>
      <!-- bottom -->
      <div class="w-full h-[71px] flex items-center justify-between px-7
                  md:h-[165px] md:px-10">
        <div class="flex flex-col">
          <p class="text-[16px] md:text-[48px] leading-none font-['Inter'] font-bold text-[#CDCDCD]">Total Proyectos</p>
          <p class="text-[9px] md:text-[24px] leading-tight font-['Inter'] font-semibold text-[#CDCDCD]">Soluciones personales desarrolladas</p>
        </div>
        <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[165px]">
          <img src={Arrow.src} alt="" class="max-w-full max-h-full" />
        </div>
      </div>
    </div>
  </div>

  <!-- CARD 2 -->
  <div
    data-card
    class="reveal
           w-[296px] h-[167px] rounded-[24px]
           grid place-items-center backdrop-blur-md border-3
           shadow-[0_8px_30px_rgba(0,0,0,0.35)]
           snap-center
           md:w-[695px] md:h-[391px] md:rounded-[40px]
           md:justify-self-start md:shadow-[0_3px_20px_#839CA8]"
  >
    <div class="w-[296px] h-[167px] rounded-[24px] bg-white/5 backdrop-blur-md ring-1 ring-white/10
                md:w-[695px] md:h-[391px] md:rounded-[40px] md:shadow-[0_8px_30px_rgba(0,0,0,0.35)]">
      <div class="w-full h-[96px] flex items-center justify-center md:w-[695px] md:h-[226px]">
        <div class="w-[240px] h-[56px] flex items-center justify-between md:w-[616px] md:h-[130px]">
          <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[129px]">
            <img src={SkillCard.src} alt="" class="max-w-full max-h-full" />
          </div>
          <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[129px]">
            <span class="text-[36px] md:text-[96px] font-semibold font-['Inter'] text-[#CDCDCD]">15</span>
          </div>
        </div>
      </div>
      <div class="w-full h-[71px] flex items-center justify-between px-7 md:h-[165px] md:px-10">
        <div class="flex flex-col">
          <p class="text-[16px] md:text-[48px] leading-none font-['Inter'] font-bold text-[#CDCDCD]">Skills</p>
          <p class="text-[9px] md:text-[24px] leading-tight font-['Inter'] font-semibold text-[#CDCDCD]">Habilidades Personales</p>
        </div>
        <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[165px]">
          <img src={Arrow.src} alt="" class="max-w-full max-h-full" />
        </div>
      </div>
    </div>
  </div>

  <!-- CARD 3 -->
  <div
    data-card
    class="reveal
           w-[296px] h-[167px] rounded-[24px]
           grid place-items-center backdrop-blur-md border-3
           shadow-[0_8px_30px_rgba(0,0,0,0.35)]
           snap-center
           md:w-[695px] md:h-[391px] md:rounded-[40px]
           md:justify-self-start md:shadow-[0_3px_20px_#839CA8]"
  >
    <div class="w-[296px] h-[167px] rounded-[24px] bg-white/5 backdrop-blur-md ring-1 ring-white/10
                md:w-[695px] md:h-[391px] md:rounded-[40px] md:shadow-[0_8px_30px_rgba(0,0,0,0.35)]">
      <div class="w-full h-[96px] flex items-center justify-center md:w-[695px] md:h-[226px]">
        <div class="w-[240px] h-[56px] flex items-center justify-between md:w-[616px] md:h-[130px]">
          <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[129px]">
            <img src={Certificate.src} alt="" class="max-w-full max-h-full" />
          </div>
          <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[129px]">
            <span class="text-[36px] md:text-[96px] font-semibold font-['Inter'] text-[#CDCDCD]">2</span>
          </div>
        </div>
      </div>
      <div class="w-full h-[71px] flex items-center justify-between px-7 md:h-[165px] md:px-10">
        <div class="flex flex-col">
          <p class="text-[16px] md:text-[48px] leading-none font-['Inter'] font-bold text-[#CDCDCD]">Certificados</p>
          <p class="text-[9px] md:text-[24px] leading-tight font-['Inter'] font-semibold text-[#CDCDCD]">Cursos de desarrollo web y programación</p>
        </div>
        <div class="w-[56px] h-[56px] grid place-items-center md:w-[129px] md:h-[165px]">
          <img src={Arrow.src} alt="" class="max-w-full max-h-full" />
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Paginación (una card = un punto) -->
<div class="md:hidden flex items-center justify-center gap-2" id="aboutDots">
  <button class="w-2 h-2 rounded-full bg-white/80 aria-[current=true]:bg-white/80 aria-[current=false]:bg-white/25" aria-current="true"></button>
  <button class="w-2 h-2 rounded-full bg-white/25 aria-[current=true]:bg-white/80" aria-current="false"></button>
  <button class="w-2 h-2 rounded-full bg-white/25 aria-[current=true]:bg-white/80" aria-current="false"></button>
</div>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const slider = document.getElementById('aboutCards');
    const dots   = Array.from(document.querySelectorAll('#aboutDots > button'));
    if (!slider || !dots.length) return;

    const cards = Array.from(slider.querySelectorAll('[data-card]'));
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          const idx = cards.indexOf(e.target);
          dots.forEach((d, i) => d.setAttribute('aria-current', String(i === idx)));
        }
      });
    }, { root: slider, threshold: 0.6 });

    cards.forEach(card => io.observe(card));
    dots.forEach((dot, i) => dot.addEventListener('click', () => {
      cards[i].scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
    }));
  });
</script>

<style>
  @keyframes fade-up {
    0% {
      opacity: 0;
      transform: translateY(24px) scale(0.98);
      filter: blur(2px);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
      filter: blur(0);
    }
  }
  .reveal {
    opacity: 0;
    transform: translateY(24px) scale(0.98);
    will-change: opacity, transform, filter;
  }
  .reveal.in-view {
    animation: fade-up 0.8s cubic-bezier(0.22, 0.61, 0.36, 1) both;
    animation-delay: var(--d, 0ms);
  }

  /* toque sutil de glow al entrar (coincide con tu estética) */
  .reveal.in-view {
    text-shadow: 0 0 4px rgba(190, 254, 246, 0.35);
  }
  @keyframes sweep {
    0% {
      --mx: -40%;
    }
    50% {
      --mx: 50%;
    }
    100% {
      --mx: 140%;
    }
  }

  /* 3D FOTO */
  .photo-3d {
    transform-style: preserve-3d;
    transform: rotateX(0deg) rotateY(0deg) scale(1);
    transition:
      transform 0.2s ease-out,
      box-shadow 0.2s ease-out;
    will-change: transform;
  }
  .photo-3d::after {
    /* brillo especular sutil */
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: radial-gradient(
      60% 60% at 30% 20%,
      rgba(255, 255, 255, 0.12),
      transparent 60%
    );
    mix-blend-mode: screen;
    border-radius: inherit;
  }

  /* SCROLL REVEAL */
  .reveal {
    opacity: 0;
    transform: translateY(24px) scale(0.98);
    transition:
      opacity 0.6s ease,
      transform 0.6s ease;
    will-change: opacity, transform;
  }
  .reveal.show {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
</style>
<script is:inline>
  // === SCROLL REVEAL ===
  const revealEls = document.querySelectorAll(".reveal");
  const io = new IntersectionObserver(
    (entries) => {
      entries.forEach((e) => {
        if (e.isIntersecting) {
          e.target.classList.add("show");
          io.unobserve(e.target);
        }
      });
    },
    { threshold: 0.15 }
  );
  revealEls.forEach((el) => io.observe(el));

  // === FOTO 3D ===
  const photo = document.getElementById("photo3d");
  if (photo) {
    const damp = 35; // menor = más giro
    const maxTilt = 12; // límite en grados
    const scale = 1.02;
    const handle = (ev) => {
      const rect = photo.getBoundingClientRect();
      const px = (ev.clientX - rect.left) / rect.width; // 0..1
      const py = (ev.clientY - rect.top) / rect.height; // 0..1
      const ry = (px - 0.5) * 2 * maxTilt;
      const rx = (0.5 - py) * 2 * maxTilt;
      photo.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) scale(${scale})`;
      // opcional: sombra dinámica
      photo.style.boxShadow = `${-ry * 1.2}px ${rx * 1.2}px 60px rgba(131,156,168,0.35)`;
    };
    photo.addEventListener("mousemove", handle);
    photo.addEventListener("mouseleave", () => {
      photo.style.transform = "rotateX(0deg) rotateY(0deg) scale(1)";
      photo.style.boxShadow = "0 0 50px #839CA8";
    });
  }
</script>
<script is:inline>
  const els = document.querySelectorAll("[data-reveal]");

  const enable = () => {
    const io = new IntersectionObserver(
      (entries) => {
        entries.forEach((e) => {
          if (e.isIntersecting) {
            e.target.classList.add("in-view");
            io.unobserve(e.target); // dispara una vez
          }
        });
      },
      { rootMargin: "0px 0px -10% 0px", threshold: 0.15 }
    );

    els.forEach((el) => io.observe(el));
  };

  // Accesibilidad: respeta reduce motion
  const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)");
  if (prefersReduced.matches) {
    els.forEach((el) => el.classList.add("in-view"));
  } else {
    enable();
    prefersReduced.addEventListener?.("change", (e) => {
      if (e.matches) els.forEach((el) => el.classList.add("in-view"));
    });
  }
</script>

<!-- Sync dots con el slider (solo móvil) -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const slider = document.getElementById('aboutCards');
    const dots   = Array.from(document.querySelectorAll('#aboutDots > button'));
    if (!slider || !dots.length) return;

    const cards = Array.from(slider.querySelectorAll('[data-card]'));

    // Observa qué card está centrada/visible en el slider
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          const idx = cards.indexOf(e.target);
          dots.forEach((d, i) => d.setAttribute('aria-current', String(i === idx)));
        }
      });
    }, { root: slider, threshold: 0.6 });

    cards.forEach(card => io.observe(card));

    // Al tocar un dot, navega a esa card
    dots.forEach((dot, i) => {
      dot.addEventListener('click', () => {
        cards[i].scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
      });
    });
  });
</script>
