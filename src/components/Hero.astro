---
import flecha from "../assets/Flecha.svg";
import arrow from "../assets/Arrow.svg";
---

<style>
  @import url("https://fonts.googleapis.com/css2?family=Alice&family=Inder&family=Lalezar&display=swap");
  @import url("https://fonts.googleapis.com/css2?family=Alice&family=Inder&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Lalezar&display=swap");
</style>
<section
  id="hero"
  data-state="intro"
  class="relative min-h-screen md:min-h-[calc(100vh-150px)] flex items-center justify-center"
>
  <div
    data-role="intro"
    class="absolute inset-0 transition-opacity duration-300
         flex items-center justify-center
         md:pt-[150px]"
  >
    <div
      class="w-[402px] h-[216px] md:w-[1710px] md:h-[709px]
             mx-auto"
    >
      <div
        class="relative w-full h-full
               font-['Lalezar'] leading-[0.8]
               text-center md:text-center"
      >
        <p
          class="intro-line-1 will-change-[opacity,transform] pt-2
                 text-white text-[64px] md:text-[250px] tracking-[0.05em]
                 pl-0 md:pl-0 <!-- sin padding en desktop -->
                 [-webkit-text-stroke:2px_#fff]
                 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.35))]"
        >
          EXPLORA
        </p>

        <p
          class="intro-line-2 will-change-[opacity,transform,filter] m-5
                 text-transparent text-[64px] md:text-[280px] tracking-[0.05em]
                 pl-0 md:pl-0 pt-0 pb-0 md:pt-[10px] md:pb-[10px]
                 [-webkit-text-stroke:3px_#fff]
                 [filter:drop-shadow(0_0_0px_#fff)_drop-shadow(0_0_0px_var(--neon))_drop-shadow(0_0_10px_var(--neon))]"
          style="--neon:#fff;"
        >
          MI MUNDO
        </p>

        <p
          class="intro-line-3 will-change-[opacity,transform]
                 text-white text-[64px] md:text-[250px] tracking-[0.05em]
                 pl-0 md:pl-0 <!-- sin padding en desktop -->
                 [-webkit-text-stroke:2px_#fff]
                 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.35))]"
        >
          DIGITAL
        </p>
      </div>
    </div>
  </div>

  <div
    data-role="name"
    class="absolute inset-0 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300"
  >
    <div class="w-full md:w-[1874px] md:h-[460px]">
      <div
        class="w-full md:w-[1874px] md:h-[319px] flex items-center justify-center"
      >
        <div
          class="px-4 py-1 md:px-6 md:py-2 rounded-2xl bg-white/0 backdrop-blur-sm"
        >
          <h1
            class="font-['Lalezar'] text-white text-[50px] md:text-[250px]
                 tracking-[0.04em] leading-[0.95] md:leading-[0.85]
                 drop-shadow-[0_0px_5px_rgba(255,255,255,0.35)] text-center"
          >
            Jhon <br class="md:hidden" /> Echenique
          </h1>
        </div>
      </div>

      <div class="w-full md:h-[141px] flex items-center justify-center">
        <div class="relative w-[330px] h-[90px] md:w-[1355px] md:h-[141px]">
          <div
            class="absolute left-0 top-1/2 -translate-y-1/2
                 w-[110px] h-[90px] grid place-items-center
                 md:left-0 md:top-0 md:translate-y-0 md:w-[408px] md:h-[141px]"
            data-opt="0"
          >
            <div class="relative">
              <span
                class="font-['Lalezar'] text-[10px] md:text-[50px] text-white transition-all duration-300"
                >Desarrollador</span
              >
              <div
                class="pointer-events-none absolute inset-0 hidden"
                data-selection
              >
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -right-4 -top-1.5 md:-right-10 md:-top-6 select-none rotate-0 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -right-4 -bottom-3 md:-right-10 md:-bottom-6 select-none rotate-90 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -left-4 -top-1.5 md:-left-10 md:-top-6 select-none -rotate-90 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -left-4 -bottom-3 md:-left-10 md:-bottom-6 select-none rotate-180 w-5 h-5 md:w-auto md:h-auto"
                />
              </div>
            </div>
          </div>

          <div
            class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
                 w-[110px] h-[90px] grid place-items-center
                 md:top-0 md:translate-y-0 md:w-[408px] md:h-[141px]"
            data-opt="1"
          >
            <div class="relative">
              <span
                class="font-['Lalezar'] text-[10px] md:text-[50px] text-white transition-all duration-300"
                >Diseñador</span
              >
              <div
                class="pointer-events-none absolute inset-0 hidden"
                data-selection
              >
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -right-4 -top-1.5 md:-right-10 md:-top-6 select-none rotate-0 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -right-4 -bottom-3 md:-right-10 md:-bottom-6 select-none rotate-90 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -left-4 -top-1.5 md:-left-10 md:-top-6 select-none -rotate-90 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -left-4 -bottom-3 md:-left-10 md:-bottom-6 select-none rotate-180 w-5 h-5 md:w-auto md:h-auto"
                />
              </div>
            </div>
          </div>

          <div
            class="absolute right-0 top-1/2 -translate-y-1/2
                 w-[110px] h-[90px] grid place-items-center
                 md:top-0 md:translate-y-0 md:w-[408px] md:h-[141px]"
            data-opt="2"
          >
            <div class="relative">
              <span
                class="font-['Lalezar'] text-[10px] md:text-[50px] text-white transition-all duration-300"
                >Creativo</span
              >
              <div
                class="pointer-events-none absolute inset-0 hidden"
                data-selection
              >
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -right-4 -top-1.5 md:-right-10 md:-top-6 select-none rotate-0 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -right-4 -bottom-3 md:-right-10 md:-bottom-6 select-none rotate-90 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -left-4 -top-1.5 md:-left-10 md:-top-6 select-none -rotate-90 w-5 h-5 md:w-auto md:h-auto"
                />
                <img
                  src={arrow.src}
                  alt=""
                  class="absolute -left-4 -bottom-3 md:-left-10 md:-bottom-6 select-none rotate-180 w-5 h-5 md:w-auto md:h-auto"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="absolute
         left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
         mt-[var(--offsetY,0px)] md:mt-0
         text-center md:text-left
         font-['Lalezar'] leading-tight tracking-[0.01em]
         text-white/80 drop-shadow-[0_1px_5px_rgba(255,255,255,0.35)]
         md:left-65 md:bottom-1 md:top-auto md:translate-x-0 md:translate-y-15"
    style="--offsetY: 200px;"
  >
    <span class="block font-regular text-white text-[15px] md:text-[25px]">
      Ubicado en Lima, Perú
    </span>
    <span class="block font-regular text-white text-[8px] md:text-[13px]">
      Estudiante en Universidad Privada del Norte
    </span>
  </div>
  <a
    href="#about"
    aria-label="Ir a la siguiente sección"
    class="group absolute z-10
         left-1/2 top-1/2 -translate-x-1/2
         translate-y-[calc(-50%+var(--arrowOffsetY,0px))]
         md:top-auto md:bottom-0 md:-translate-x-1/2 md:translate-y-10"
    style="--arrowOffsetY: 350px;"
  >
    <img
      src={flecha.src}
      alt=""
      class="block select-none will-change-transform
           animate-[arrow-slow_1s_ease-in-out_infinite]
           motion-reduce:animate-none"
    />
  </a>

  <style>
    @keyframes arrow-slow {
      0%,
      100% {
        transform: translateY(0);
        opacity: 0.95;
      }
      50% {
        transform: translateY(8px);
        opacity: 1;
      }
    }

    #hero[data-state="intro"] .intro-line-1 {
      animation: in-fade-right 0.9s cubic-bezier(0.22, 0.61, 0.36, 1) 0s both;
    }
    #hero[data-state="intro"] .intro-line-2 {
      animation: in-reveal-center 0.9s cubic-bezier(0.22, 0.61, 0.36, 1) 0.15s
        both;
    }
    #hero[data-state="intro"] .intro-line-3 {
      animation: in-fade-left 0.9s cubic-bezier(0.22, 0.61, 0.36, 1) 0.3s both;
    }

    #hero[data-state="name"] .intro-line-1 {
      animation: out-fade-left 0.5s ease 0s both;
    }
    #hero[data-state="name"] .intro-line-2 {
      animation: out-shrink-center 0.5s ease 0.05s both;
    }
    #hero[data-state="name"] .intro-line-3 {
      animation: out-fade-right 0.5s ease 0.1s both;
    }

    @keyframes in-fade-right {
      from {
        opacity: 0;
        transform: translateX(-48px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    @keyframes in-reveal-center {
      from {
        opacity: 0;
        transform: scaleX(0.7);
        filter: blur(3px);
      }
      to {
        opacity: 1;
        transform: scaleX(1);
        filter: blur(0);
      }
    }
    @keyframes in-fade-left {
      from {
        opacity: 0;
        transform: translateX(48px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes out-fade-left {
      from {
        opacity: 1;
        transform: translateX(0);
      }
      to {
        opacity: 0;
        transform: translateX(-32px);
      }
    }
    @keyframes out-shrink-center {
      from {
        opacity: 1;
        transform: scaleX(1);
        filter: blur(0);
      }
      to {
        opacity: 0;
        transform: scaleX(0.7);
        filter: blur(2px);
      }
    }
    @keyframes out-fade-right {
      from {
        opacity: 1;
        transform: translateX(0);
      }
      to {
        opacity: 0;
        transform: translateX(32px);
      }
    }
  </style>
  <script>
    (function () {
      const hero = document.getElementById("hero");
      if (!hero) return;
      const intro = hero.querySelector(
        '[data-role="intro"]'
      ) as HTMLElement | null;
      const name = hero.querySelector(
        '[data-role="name"]'
      ) as HTMLElement | null;
      /** * @param {HTMLElement} el */ function show(el: HTMLElement) {
        el.classList.remove("opacity-0", "pointer-events-none");
      }
      /** * @param {HTMLElement} el */ function hide(el: HTMLElement) {
        el.classList.add("opacity-0", "pointer-events-none");
      }
      try {
        const saved = localStorage.getItem("heroState");
        if (saved === "name" && intro && name) {
          hide(intro);
          show(name);
          hero.dataset.state = "name";
        }
      } catch {}
      window.addEventListener("hero:toggle", () => {
        const next = hero.dataset.state === "intro" ? "name" : "intro";
        if (intro && name) {
          if (next === "name") {
            hide(intro);
            show(name);
          } else {
            hide(name);
            show(intro);
          }
          hero.dataset.state = next;
          try {
            localStorage.setItem("heroState", next);
          } catch {}
        }
      });
    })();

    (function () {
      const root = document.querySelector('[data-role="name"]');
      if (!root) return;
      const items = Array.from(root.querySelectorAll("[data-opt]"));
      if (items.length === 0) return;
      let idx = 0;
      const BLUR_CLASS = "blur-[7px] opacity-50";
      function render() {
        items.forEach((el, i) => {
          const label = el.querySelector("span");
          const sel = el.querySelector("[data-selection]");
          if (!label) return;
          if (i === idx) {
            label.classList.remove(...BLUR_CLASS.split(" "));
            sel && sel.classList.remove("hidden");
          } else {
            label.classList.add(...BLUR_CLASS.split(" "));
            sel && sel.classList.add("hidden");
          }
        });
      }
      render();
      setInterval(() => {
        idx = (idx + 1) % items.length;
        render();
      }, 2000);
    })();
  </script>
</section>
